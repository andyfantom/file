/*!
 * JW7 VPL ~ version 1.0 ~ August 2015, Copyright (c) James Herrieven ~ http://powered-by-haiku.co.uk
 * A plugin fix for making the JW Player 7 visual playlist responsive
 * Licensed under The MIT License.
 * v1.1 ~ 27/08/2015 ~ Added config options: "title":"Playlist", "showDescription":boolean, "showControls":boolean, "sizing":{}
 */

!function(t){var e=function(t,e){function i(t,i){var n=document.getElementById(t.id+"_jw7_vpl");n||(n=document.createElement("style"),n.setAttribute("type","text/css"),n.setAttribute("id",t.id+"_jw7_vpl"),document.getElementsByTagName("head")[0].appendChild(n));var d=i?i.width:t.getContainer().offsetWidth,h=document.querySelectorAll("#"+t.id+" .jw-controlbar")[0];h&&(o?(h.setAttribute("style","display:inline-block;"),r=!1):(r&&h.setAttribute("style","visibility:hidden;display:inline-block;"),o=!1),d=h.offsetWidth);var g=i?i.height:t.getContainer().getClientRects()[0].height,p={width:"100%",height:"100%",margin:[0,0]},m=e;e.sizing&&(m=e.sizing);for(var f in m)if(d>=parseInt(f,10))for(var c in m[f])p[c]=m[f][c];var w=document.querySelectorAll("#"+t.id+" .jw-icon-playlist")[0],u=document.querySelectorAll("#"+t.id+" .jw-tooltip-title")[0],y=u.querySelectorAll(".jw-text")[0],v=document.querySelectorAll("#"+t.id+" .jw-playlist li.jw-option");if(w&&h){e.title&&(y.innerHTML=e.title);var j,b,x,A=w.offsetLeft,C=0;4==p.margin.length&&(j=p.margin[0],b=p.margin[1],x=p.margin[2],C=p.margin[3]),(2==p.margin.length||3==p.margin.length)&&(j=p.margin[0],b=p.margin[1],x=p.margin[0],C=p.margin[1]),1==p.margin.length&&(j=p.margin[0],b=p.margin[0],x=p.margin[0],C=p.margin[0]);var I=p.width;I=p.width.indexOf("%")>-1?d*(parseInt(p.width,10)/100)+"px":parseInt(p.width,10)+"px";var S=p.height;if(p.height.indexOf("%")>-1){var T=g-(g-h.offsetTop)-u.offsetHeight;S=T*(parseInt(p.height,10)/100)-(j+x)+"px"}else S=parseInt(p.height,10)-(j+x)+"px";for(var H=!1,k=0,q=t.getPlaylist(),P=0,z=v.length;z>P;P++){var E=v[P];if(s&&a){var L=q[P].description;if(L&&!E.getAttribute("data-has-desc")){var M=document.createElement("span");M.setAttribute("class","jw-description jw-reset"),M.innerHTML=L,E.appendChild(M),E.setAttribute("data-has-desc",!0)}}k+=E.offsetHeight}a=!1,k<=parseInt(S,10)&&(H=!0);var _="\n",W="";W+="#"+t.id+" .jw-icon-playlist .jw-overlay{"+_,W+="width: "+I+";"+_,W+="left: -"+A+"px;"+_,W+="bottom:"+(w.offsetHeight+w.offsetTop)+"px;"+_,j>0&&(W+="padding-top:"+j+"px;"+_),b>0&&(W+="padding-right:"+b+"px;"+_),x>0&&(W+="padding-bottom:"+x+"px;"+_),C>0&&(W+="padding-left:"+C+"px;"+_),W+="}"+_,W+="#"+t.id+" .jw-icon-playlist .jw-overlay::after{"+_,W+="height:15px;"+_,W+="left:0;"+_,W+="}"+_,W+="#"+t.id+" .jw-playlist-container{"+_,W+="left:0;"+_,W+="bottom:0;"+_,W+="}"+_,W+="#"+t.id+" .jw-playlist-container .jw-playlist{"+_,W+="max-height:none;"+_,W+="min-height:none;"+_,W+="height: "+S+";"+_,W+="overflow-x: hidden;"+_,H&&(W+="overflow-y: hidden;"+_,W+="width:100%;"+_),W+="}"+_,W+="#"+t.id+" .jw-playlist-container .jw-option{"+_,W+="text-align:left;"+_,H&&(W+="margin-right:0;"+_),W+="height: auto;",W+="overflow: hidden;",W+="}"+_,W+="#"+t.id+" .jw-playlist-container .jw-option .jw-label{"+_,W+="width: 2em;"+_,W+="text-align: center;"+_,s&&(W+="line-height: 2em;"+_,W+="margin-top: 0.5em;"+_),W+="}"+_,s&&(W+="#"+t.id+" .jw-playlist .jw-name {"+_,W+="width: auto;"+_,W+="line-height: 2em;"+_,W+="margin-top: 0.5em;"+_,W+="}"+_,W+="#"+t.id+" .jw-playlist .jw-description {"+_,W+="display: block;"+_,W+="line-height: 1em;"+_,W+="margin-bottom: 1em;"+_,W+="margin-left: 3em;"+_,W+="font-size: 0.8em;"+_,W+="}"+_),n.styleSheet?n.styleSheet.cssText=W:n.innerHTML=W}r&&h.removeAttribute("style"),l&&(l=!1)}var n=!1,l=!0,a=!0,r=!0,o=!1,s=!1;t.on("ready",function(){var l=t.getConfig();t.getPlaylist().length>1?("undefined"==l.visualplaylist||l.visualplaylist!==!1&&"false"!==l.visualplaylist)&&(("undefined"==e.showControls||e.showControls!==!1&&"false"!==e.showControls)&&(o=!0),"undefined"!=e.showDescription&&(s=e.showDescription),n=!0,i(t)):r=!1}),t.on("play",function(){if(n&&(r=!1,o)){var e=document.querySelectorAll("#"+t.id+" .jw-controlbar")[0];e&&e.removeAttribute("style"),o=!1}}),t.on("resize",function(){n&&i(t)}),t.on("playlistItem",function(){n&&(a=!0,setTimeout(function(){i(t)},10))}),this.about={label:"Making the JW Player 7 Visual Playlist responsive",version:"v1.1",author:"James Herrieven ~ http://powered-by-haiku.co.uk"}};t().registerPlugin("jw7vpl","6.0",e)}(jwplayer);